<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pH Estimator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>pH Estimator</h1>
    <div class="pill">ROI: <span id="roiSize">64×64</span></div>
  </header>

  <main>
    <div class="video-wrap">
      <video id="video" autoplay playsinline></video>
      <canvas id="overlay"></canvas>
    </div>

    <div class="readout">
      <div id="status">Waiting for camera…</div>
      <div id="result">pH: --</div>
      <div id="debug">Hue: --</div>
    </div>

    <!-- pH color bar -->
    <section class="phbar">
      <div class="phbar-labels">
        <span>1</span><span>4</span><span>7</span><span>10</span><span>14</span>
      </div>
      <div class="bar" id="phBar">
        <div class="marker" id="phMarker" title="estimated pH"></div>
      </div>
    </section>

    <!-- Calibration panel -->
    <section class="calib">
      <div class="calib-header">
        <h2>Calibration</h2>
        <div class="mode">
          Mode:
          <button id="useDefault" class="secondary">Default</button>
          <button id="useManual" class="secondary">Manual</button>
          <span id="activeMode" class="tag">Active: Default</span>
        </div>
      </div>

      <div class="calib-grid">
        <div class="card">
          <h3>Add manual point</h3>
          <p>Point the ROI at your reference color, enter the known pH (1–14), then capture.</p>
          <div class="row">
            <label for="phInput">pH</label>
            <input id="phInput" type="number" min="1" max="14" step="0.1" value="7" />
            <button id="btnCapture">Capture current ROI → Add</button>
          </div>
          <div class="row">
            <label><input type="checkbox" id="wbToggle"> Simple white balance (ROI)</label>
          </div>
        </div>

        <div class="card">
          <h3>Manage points</h3>
          <div class="buttons">
            <button id="btnReset">Reset manual</button>
            <button id="btnSave">Save</button>
            <button id="btnLoad">Load</button>
            <button id="btnExport">Export</button>
            <label class="import">
              Import <input id="fileImport" type="file" accept="application/json" hidden />
            </label>
          </div>
          <pre id="pointsList" class="points">No manual points yet.</pre>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <button id="smaller">Smaller ROI</button>
    <button id="bigger">Bigger ROI</button>
    <button id="toggle">Pause/Resume</button>
  </footer>

  <script src="script.js"></script>
</body>
</html>
